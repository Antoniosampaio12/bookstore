<div class="app-container">
  <!-- Navigation Header -->
  <header class="app-header">
    <div class="header-content">
      <h1 class="app-title">📚 Sistema de Livros</h1>
      <nav class="nav-actions">
        <button 
          type="button" 
          class="btn btn-outline"
          routerLink="/books">
          📖 Livros
        </button>
        
        <!-- Botões para usuários não autenticados -->
        <button 
          *ngIf="!isAuthenticated"
          type="button" 
          class="btn btn-primary"
          routerLink="/auth">
          🔐 Entrar
        </button>
        
        <!-- Botões para usuários autenticados -->
        <div *ngIf="isAuthenticated" class="profile-container">
          <button 
            type="button" 
            class="btn btn-outline"
            (click)="onProfileClick()"
            [disabled]="loadingProfile">
            <span *ngIf="loadingProfile" class="loading-spinner"></span>
            {{ loadingProfile ? '' : '👤 Perfil' }}
          </button>
          
          <!-- Profile Popover -->
          <div *ngIf="showProfilePopover" class="profile-popover">
            <div class="popover-arrow"></div>
            <div class="popover-content">
              <div class="profile-header">
                <h3>👤 Meu Perfil</h3>
                <button 
                  type="button" 
                  class="close-btn"
                  (click)="closeProfilePopover()">
                  ✕
                </button>
              </div>
              <div *ngIf="userProfile" class="profile-info">
                <div class="profile-field">
                  <strong>Nome:</strong>
                  <span>{{ userProfile.name }}</span>
                </div>
                <div class="profile-field">
                  <strong>Email:</strong>
                  <span>{{ userProfile.email }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <button 
          *ngIf="isAuthenticated"
          type="button" 
          class="btn btn-danger"
          (click)="onLogout()">
          🚪 Sair
        </button>
      </nav>
    </div>
  </header>

  <!-- Overlay para fechar popover -->
  <div *ngIf="showProfilePopover" class="popover-overlay" (click)="closeProfilePopover()"></div>

  <!-- Main Content -->
  <main class="app-main">
    <router-outlet></router-outlet>
  </main>
</div>